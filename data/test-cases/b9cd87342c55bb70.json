{"uid":"b9cd87342c55bb70","name":"Calculation Testing | Scenario=S8 | Mode=Credit Card | Slab=1001-5000 | Amount=1200","fullName":"testCases.Calculation_test.TestCalculations#test_calculation_amount","historyId":"7ad6817aa163894b1bae2fc44ca4c9e8","time":{"start":1758650648737,"stop":1758650711010,"duration":62273},"description":"Test the cancel transaction button functionality.","descriptionHtml":"<p>Test the cancel transaction button functionality.</p>\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.select_option: Timeout 30000ms exceeded.\nCall log:\nwaiting for locator(\"select[name='environment']\")","statusTrace":"self = <testCases.Calculation_test.TestCalculations object at 0x000001D3F9031490>, page_with_screenshot = <Page url='https://securetest.sabpaisa.in/ClientTest/clientDetailServlet'>\nscenario = 'S8', payment_mode = 'Credit Card', slab = '1001-5000', amount = 1200, excel_client_code = 'TM001', excel_environment = 'STAGING', ensure_db_updated = None\n\n    @allure.story(\"Cancel Transaction Button Check\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.ui\n    @pytest.mark.regression\n    def test_calculation_amount(self, page_with_screenshot, scenario, payment_mode, slab, amount, excel_client_code,\n                                excel_environment, ensure_db_updated):\n        \"\"\"Test the cancel transaction button functionality.\"\"\"\n        timestamp = datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\")\n        allure.dynamic.title(\n            f\"Calculation Testing | Scenario={scenario} | Mode={payment_mode} | Slab={slab} | Amount={amount}\"\n        )\n        self.logger.info(f\"--- Starting calculation Test for {scenario} | {payment_mode} | {slab} | {amount} ---\")\n    \n        bill_amount = conv_charges = total_amount = txn_id = \"N/A\"\n        status = \"Fail\"\n    \n        try:\n            if payment_mode == \"UPI INTENT\":\n                viewport_size = {\"width\": 375, \"height\": 667}  # Example: iPhone-like dimensions\n                page_with_screenshot.set_viewport_size(viewport_size)\n                self.logger.info(\n                    f\"Set viewport size to {viewport_size['width']}x{viewport_size['height']} for UPI INTENT mode\")\n                allure.attach(page_with_screenshot.screenshot(), name=\"UPI Intent Initial Viewport\",\n                              attachment_type=allure.attachment_type.PNG)\n    \n    \n            # Initialize page objects\n            client = ClientPage(page_with_screenshot)\n            client_details = ClientDetailsPage(page_with_screenshot)\n            pg = PaymentGatewayPage(page_with_screenshot)\n            pg_response = PaymentGatewayResponsePage(page_with_screenshot)\n    \n            # Fill and verify client and payer details\n>           fill_and_verify_client_details(self.logger, client, client_details, excel_client_code, excel_environment)\n\ntestCases\\Calculation_test.py:173: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nutilites\\client_helper.py:23: in fill_and_verify_client_details\n    client.select(\"_environment\", environment)\npageObjects\\base_page.py:32: in select\n    self.page.locator(locator).select_option(option)\n.venv\\Lib\\site-packages\\playwright\\sync_api\\_generated.py:17293: in select_option\n    self._sync(\n.venv\\Lib\\site-packages\\playwright\\_impl\\_locator.py:557: in select_option\n    return await self._frame.select_option(\n.venv\\Lib\\site-packages\\playwright\\_impl\\_frame.py:678: in select_option\n    return await self._channel.send(\"selectOption\", params)\n.venv\\Lib\\site-packages\\playwright\\_impl\\_connection.py:59: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Connection object at 0x000001D3F91610F0>, cb = <function Channel.send.<locals>.<lambda> at 0x000001D3F9696980>, is_internal = False\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(task, \"__pw_stack__\", inspect.stack())\n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.select_option: Timeout 30000ms exceeded.\nE           Call log:\nE           waiting for locator(\"select[name='environment']\")\n\n.venv\\Lib\\site-packages\\playwright\\_impl\\_connection.py:520: TimeoutError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"attach_test_timestamp","time":{"start":1758650642883,"stop":1758650642887,"duration":4},"status":"passed","steps":[],"attachments":[{"uid":"b760681e18a0ea7d","name":"Test Execution Timestamp","source":"b760681e18a0ea7d.txt","type":"text/plain","size":19}],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true,"stepsCount":0},{"name":"browser","time":{"start":1758650642887,"stop":1758650644669,"duration":1782},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false,"stepsCount":0},{"name":"page","time":{"start":1758650644669,"stop":1758650648728,"duration":4059},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false,"stepsCount":0},{"name":"page_with_screenshot","time":{"start":1758650648728,"stop":1758650648728,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false,"stepsCount":0},{"name":"ensure_db_updated","time":{"start":1758650648730,"stop":1758650648737,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false,"stepsCount":0}],"testStage":{"description":"Test the cancel transaction button functionality.","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.select_option: Timeout 30000ms exceeded.\nCall log:\nwaiting for locator(\"select[name='environment']\")","statusTrace":"self = <testCases.Calculation_test.TestCalculations object at 0x000001D3F9031490>, page_with_screenshot = <Page url='https://securetest.sabpaisa.in/ClientTest/clientDetailServlet'>\nscenario = 'S8', payment_mode = 'Credit Card', slab = '1001-5000', amount = 1200, excel_client_code = 'TM001', excel_environment = 'STAGING', ensure_db_updated = None\n\n    @allure.story(\"Cancel Transaction Button Check\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.ui\n    @pytest.mark.regression\n    def test_calculation_amount(self, page_with_screenshot, scenario, payment_mode, slab, amount, excel_client_code,\n                                excel_environment, ensure_db_updated):\n        \"\"\"Test the cancel transaction button functionality.\"\"\"\n        timestamp = datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\")\n        allure.dynamic.title(\n            f\"Calculation Testing | Scenario={scenario} | Mode={payment_mode} | Slab={slab} | Amount={amount}\"\n        )\n        self.logger.info(f\"--- Starting calculation Test for {scenario} | {payment_mode} | {slab} | {amount} ---\")\n    \n        bill_amount = conv_charges = total_amount = txn_id = \"N/A\"\n        status = \"Fail\"\n    \n        try:\n            if payment_mode == \"UPI INTENT\":\n                viewport_size = {\"width\": 375, \"height\": 667}  # Example: iPhone-like dimensions\n                page_with_screenshot.set_viewport_size(viewport_size)\n                self.logger.info(\n                    f\"Set viewport size to {viewport_size['width']}x{viewport_size['height']} for UPI INTENT mode\")\n                allure.attach(page_with_screenshot.screenshot(), name=\"UPI Intent Initial Viewport\",\n                              attachment_type=allure.attachment_type.PNG)\n    \n    \n            # Initialize page objects\n            client = ClientPage(page_with_screenshot)\n            client_details = ClientDetailsPage(page_with_screenshot)\n            pg = PaymentGatewayPage(page_with_screenshot)\n            pg_response = PaymentGatewayResponsePage(page_with_screenshot)\n    \n            # Fill and verify client and payer details\n>           fill_and_verify_client_details(self.logger, client, client_details, excel_client_code, excel_environment)\n\ntestCases\\Calculation_test.py:173: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nutilites\\client_helper.py:23: in fill_and_verify_client_details\n    client.select(\"_environment\", environment)\npageObjects\\base_page.py:32: in select\n    self.page.locator(locator).select_option(option)\n.venv\\Lib\\site-packages\\playwright\\sync_api\\_generated.py:17293: in select_option\n    self._sync(\n.venv\\Lib\\site-packages\\playwright\\_impl\\_locator.py:557: in select_option\n    return await self._frame.select_option(\n.venv\\Lib\\site-packages\\playwright\\_impl\\_frame.py:678: in select_option\n    return await self._channel.send(\"selectOption\", params)\n.venv\\Lib\\site-packages\\playwright\\_impl\\_connection.py:59: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Connection object at 0x000001D3F91610F0>, cb = <function Channel.send.<locals>.<lambda> at 0x000001D3F9696980>, is_internal = False\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(task, \"__pw_stack__\", inspect.stack())\n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.select_option: Timeout 30000ms exceeded.\nE           Call log:\nE           waiting for locator(\"select[name='environment']\")\n\n.venv\\Lib\\site-packages\\playwright\\_impl\\_connection.py:520: TimeoutError","steps":[{"name":"Filling and verifying client details","time":{"start":1758650648739,"stop":1758650710755,"duration":62016},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.select_option: Timeout 30000ms exceeded.\nCall log:\nwaiting for locator(\"select[name='environment']\")\n\n","statusTrace":"  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\.venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\utilites\\client_helper.py\", line 23, in fill_and_verify_client_details\n    client.select(\"_environment\", environment)\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\pageObjects\\base_page.py\", line 32, in select\n    self.page.locator(locator).select_option(option)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\.venv\\Lib\\site-packages\\playwright\\sync_api\\_generated.py\", line 17293, in select_option\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.select_option(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n        )\n        ^\n    )\n    ^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\.venv\\Lib\\site-packages\\playwright\\_impl\\_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\.venv\\Lib\\site-packages\\playwright\\_impl\\_locator.py\", line 557, in select_option\n    return await self._frame.select_option(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\.venv\\Lib\\site-packages\\playwright\\_impl\\_frame.py\", line 678, in select_option\n    return await self._channel.send(\"selectOption\", params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\.venv\\Lib\\site-packages\\playwright\\_impl\\_connection.py\", line 59, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        lambda: self.inner_send(method, params, False)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\.venv\\Lib\\site-packages\\playwright\\_impl\\_connection.py\", line 520, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[{"name":"Filling Client Code : TM001","time":{"start":1758650648739,"stop":1758650649163,"duration":424},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false,"stepsCount":0},{"name":"Selecting Environment : STAGING","time":{"start":1758650649163,"stop":1758650649522,"duration":359},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false,"stepsCount":0},{"name":"Clicking Show Detail","time":{"start":1758650649522,"stop":1758650650413,"duration":891},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false,"stepsCount":0},{"name":"Verifying if Payer Name is visible","time":{"start":1758650650413,"stop":1758650710749,"duration":60336},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.select_option: Timeout 30000ms exceeded.\nCall log:\nwaiting for locator(\"select[name='environment']\")\n\n","statusTrace":"  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\utilites\\client_helper.py\", line 23, in fill_and_verify_client_details\n    client.select(\"_environment\", environment)\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\pageObjects\\base_page.py\", line 32, in select\n    self.page.locator(locator).select_option(option)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\.venv\\Lib\\site-packages\\playwright\\sync_api\\_generated.py\", line 17293, in select_option\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.select_option(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n        )\n        ^\n    )\n    ^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\.venv\\Lib\\site-packages\\playwright\\_impl\\_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\.venv\\Lib\\site-packages\\playwright\\_impl\\_locator.py\", line 557, in select_option\n    return await self._frame.select_option(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\.venv\\Lib\\site-packages\\playwright\\_impl\\_frame.py\", line 678, in select_option\n    return await self._channel.send(\"selectOption\", params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\.venv\\Lib\\site-packages\\playwright\\_impl\\_connection.py\", line 59, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        lambda: self.inner_send(method, params, False)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Bhargava\\Desktop\\QA project\\sabpaisa_pg_qa_automation\\.venv\\Lib\\site-packages\\playwright\\_impl\\_connection.py\", line 520, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"attachmentStep":false,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"logger","value":"<RootLogger root (DEBUG)>"},{"name":"client","value":"<pageObjects.client_page.ClientPage object at 0x000001D3F9161480>"},{"name":"client_details","value":"<pageObjects.client_details_page.ClientDetailsPage object at 0x000001D3F8F37D90>"},{"name":"client_code","value":"'TM001'"},{"name":"environment","value":"'STAGING'"}],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":true,"stepsCount":4}],"attachments":[{"uid":"6cbe0ef0fc1f6308","name":"Exception Details","source":"6cbe0ef0fc1f6308.txt","type":"text/plain","size":109},{"uid":"88ed0f70c51ed1ae","name":"log","source":"88ed0f70c51ed1ae.txt","type":"text/plain","size":3553}],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":2,"attachmentStep":false,"hasContent":true,"stepsCount":5},"afterStages":[{"name":"ensure_db_updated::0","time":{"start":1758650711402,"stop":1758650711402,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false,"stepsCount":0},{"name":"page_with_screenshot::0","time":{"start":1758650711489,"stop":1758650714375,"duration":2886},"status":"passed","steps":[],"attachments":[{"uid":"f645967c7d0350","name":"Screenshot","source":"f645967c7d0350.png","type":"image/png","size":45025},{"uid":"509256905df1ed88","name":"Test Video","source":"509256905df1ed88.webm","type":"video/webm","size":963487}],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":2,"attachmentStep":false,"hasContent":true,"stepsCount":0},{"name":"page::0","time":{"start":1758650714380,"stop":1758650714380,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false,"stepsCount":0},{"name":"browser::0","time":{"start":1758650714384,"stop":1758650714441,"duration":57},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false,"stepsCount":0}],"labels":[{"name":"severity","value":"critical"},{"name":"story","value":"Cancel Transaction Button Check"},{"name":"epic","value":"Payment Gateway"},{"name":"tag","value":"regression"},{"name":"tag","value":"ui"},{"name":"parentSuite","value":"testCases"},{"name":"suite","value":"Calculation_test"},{"name":"subSuite","value":"TestCalculations"},{"name":"host","value":"SRS-CL-009"},{"name":"thread","value":"61112-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"testCases.Calculation_test"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"amount","value":"1200"},{"name":"excel_client_code","value":"'TM001'"},{"name":"excel_environment","value":"'STAGING'"},{"name":"payment_mode","value":"'Credit Card'"},{"name":"scenario","value":"'S8'"},{"name":"slab","value":"'1001-5000'"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["ui","regression"]},"source":"b9cd87342c55bb70.json","parameterValues":["1200","'TM001'","'STAGING'","'Credit Card'","'S8'","'1001-5000'"]}